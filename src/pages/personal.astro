---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Hero from '@/components/Hero.astro';
import PostCard from '@/components/PostCard.astro';
import { getCollection } from 'astro:content';

// Get personal posts and notes
const allPosts = await getCollection('posts');
const personalPosts = allPosts
  .filter(post => post.data.tags.includes('personal'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const allNotes = await getCollection('notes');
const recentNotes = allNotes
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 6);

const interests = [
  {
    title: 'Music Discovery',
    icon: 'üéµ',
    description: 'Always exploring new sounds, from jazz fusion to electronic ambient. Currently obsessed with finding hidden gems on streaming platforms.',
    gradient: 'from-neon-purple to-neon-pink'
  },
  {
    title: 'Running',
    icon: 'üèÉ‚Äç‚ôÇÔ∏è',
    description: 'Trail running enthusiast who believes the best debugging happens at mile 5. Training for my next half marathon.',
    gradient: 'from-neon-pink to-neon-blue'
  },
  {
    title: 'Coffee Culture',
    icon: '‚òï',
    description: 'Third-wave coffee enthusiast with a slight obsession with pour-over techniques and single-origin beans.',
    gradient: 'from-neon-blue to-neon-purple'
  },
  {
    title: 'Photography',
    icon: 'üì∏',
    description: 'Capturing moments during travels and nature walks. Mostly using film cameras for that authentic feel.',
    gradient: 'from-silver to-neon-pink'
  }
];
---

<BaseLayout 
  title="Personal | Nikos Dimitriadis"
  description="Get to know the person behind the code - my interests, thoughts, and stories beyond the professional world."
>
  <!-- Hero with playful twist -->
  <Hero 
    title="Beyond the Code"
    subtitle="The Personal Side"
    description="Music, running, coffee, and the random thoughts that keep life interesting. Welcome to the more human side of things."
    cta={{
      text: "Explore My Thoughts",
      href: "#recent-thoughts"
    }}
    secondaryCta={{
      text: "View Professional Side",
      href: "/professional"
    }}
    gradient={true}
  />

  <!-- Interests Grid -->
  <section class="py-20 px-4">
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-16 fade-on-scroll">
        <h2 class="text-3xl md:text-4xl font-bold font-heading mb-4">
          What Drives Me
        </h2>
        <p class="text-xl text-gray-400 max-w-2xl mx-auto">
          The interests and passions that fuel my creativity and keep me inspired outside of work.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-8">
        {interests.map((interest, index) => (
          <div class={`relative group bg-gradient-to-br ${interest.gradient}/10 rounded-2xl p-8 border border-gray-800 hover:border-gray-600 transition-all duration-300 fade-on-scroll`}>
            <div class="text-4xl mb-4">{interest.icon}</div>
            <h3 class="text-2xl font-bold font-heading mb-4 text-white">{interest.title}</h3>
            <p class="text-gray-300 leading-relaxed">{interest.description}</p>
            
            <!-- Playful hover effect -->
            <div class={`absolute inset-0 bg-gradient-to-br ${interest.gradient}/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none`}></div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Recent Thoughts (Notes) -->
  <section id="recent-thoughts" class="py-20 px-4 bg-dark-gray">
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-16 fade-on-scroll">
        <h2 class="text-3xl md:text-4xl font-bold font-heading mb-4">
          Recent Thoughts
        </h2>
        <p class="text-xl text-gray-400 max-w-2xl mx-auto">
          Quick thoughts, observations, and random musings that didn't quite become full posts.
        </p>
      </div>

      {recentNotes.length > 0 ? (
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          {recentNotes.map((note, index) => (
            <div class={`bg-medium-gray rounded-xl p-6 hover:bg-gray-700 transition-all duration-300 fade-on-scroll group`} style={`animation-delay: ${index * 100}ms`}>
              <div class="flex items-start justify-between mb-4">
                <time class="text-sm text-gray-400" datetime={note.data.pubDate.toISOString()}>
                  {note.data.pubDate.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric',
                    year: 'numeric'
                  })}
                </time>
                {note.data.tags && note.data.tags.length > 0 && (
                  <span class="text-xs px-2 py-1 bg-neon-purple/20 text-neon-purple rounded-full">
                    #{note.data.tags[0]}
                  </span>
                )}
              </div>
              
              <h3 class="text-lg font-semibold text-white mb-3 group-hover:text-neon-purple transition-colors duration-200">
                {note.data.title}
              </h3>
              
              <div class="text-gray-300 text-sm leading-relaxed">
                {note.data.description || note.body?.slice(0, 150) + '...'}
              </div>
            </div>
          ))}
        </div>
      ) : (
        <div class="text-center py-12 fade-on-scroll">
          <p class="text-gray-400 text-lg">
            More thoughts coming soon... Currently busy creating new experiences to write about! 
          </p>
        </div>
      )}
    </div>
  </section>

  <!-- Personal Stories -->
  {personalPosts.length > 0 && (
    <section class="py-20 px-4">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-16 fade-on-scroll">
          <h2 class="text-3xl md:text-4xl font-bold font-heading mb-4">
            Personal Stories
          </h2>
          <p class="text-xl text-gray-400 max-w-2xl mx-auto">
            Longer-form thoughts and stories from my personal journey.
          </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
          {personalPosts.map((post, index) => (
            <div class="fade-on-scroll" style={`animation-delay: ${index * 100}ms`}>
              <PostCard
                title={post.data.title}
                description={post.data.description}
                pubDate={post.data.pubDate}
                tags={post.data.tags}
                slug={post.slug}
              />
            </div>
          ))}
        </div>

        <div class="text-center mt-12 fade-on-scroll">
          <a 
            href="/writing?tag=personal" 
            class="inline-flex items-center gap-2 px-6 py-3 bg-medium-gray text-white font-medium rounded-lg hover:bg-gray-600 transition-all duration-200 hover:scale-105"
          >
            Read All Personal Posts
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
        </div>
      </div>
    </section>
  )}

  <!-- Fun Stats -->
  <section class="py-20 px-4 bg-gradient-to-br from-neon-purple/5 to-neon-pink/5">
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-16 fade-on-scroll">
        <h2 class="text-3xl font-bold font-heading mb-4">
          Fun Facts & Stats
        </h2>
        <p class="text-xl text-gray-400">
          Some random but true things about me
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="text-center fade-on-scroll">
          <div class="text-4xl font-bold text-neon-purple mb-2">500+</div>
          <div class="text-gray-400">Songs discovered this year</div>
        </div>
        <div class="text-center fade-on-scroll">
          <div class="text-4xl font-bold text-neon-pink mb-2">42</div>
          <div class="text-gray-400">Coffee shops visited</div>
        </div>
        <div class="text-center fade-on-scroll">
          <div class="text-4xl font-bold text-neon-blue mb-2">1,200+</div>
          <div class="text-gray-400">Miles run this year</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Connect -->
  <section class="py-20 px-4">
    <div class="max-w-4xl mx-auto text-center fade-on-scroll">
      <h2 class="text-3xl font-bold font-heading mb-4">
        Let's Chat About Life
      </h2>
      <p class="text-xl text-gray-400 mb-8 max-w-2xl mx-auto">
        Always up for conversations about music recommendations, running routes, or that perfect cup of coffee.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href="/contact" 
          class="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold rounded-lg hover:scale-105 transition-transform duration-200"
        >
          Say Hello
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
        <a 
          href="/professional" 
          class="inline-flex items-center gap-2 px-8 py-4 border border-gray-600 text-gray-300 font-semibold rounded-lg hover:text-white hover:border-gray-500 transition-all duration-200"
        >
          View Professional Side
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
